{% extends "admin_layout.html" %}

{% block content %}
<style>
.section-title { text-align: center; margin: 30px 0 20px; }
.admin-form { width: 550px; margin: auto; padding: 25px; background: white; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.08); }
.form-group { margin-bottom: 18px; }
.form-group label { font-weight: 600; display: block; margin-bottom: 6px; }
.admin-form input, .admin-form textarea { width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #ccc; box-sizing: border-box; }
.submit-btn { width: 100%; background: black; color: white; padding: 12px; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; }

.blog-grid { width: 90%; margin: 50px auto; display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; }
.blog-item { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.08); }
.blog-item img { width: 100%; height: 180px; object-fit: cover; }
.blog-info { padding: 15px; }
.blog-info h3 { margin: 0; font-size: 18px; color: #461276; }
.blog-info span { font-size: 12px; color: #999; }
.blog-actions { padding: 15px; display: flex; gap: 10px; border-top: 1px solid #eee; }
.blog-actions a { flex: 1; padding: 8px; border-radius: 6px; text-decoration: none; font-size: 14px; text-align: center; color: white; font-weight: 600; }
.edit-btn { background: #007bff; }
.delete-btn { background: #dc3545; }
</style>

<h2 class="section-title">{% if edit_mode %} Edit Blog Post {% else %} Add New Blog Post {% endif %}</h2>

<form method="POST" enctype="multipart/form-data" class="admin-form">
    {% csrf_token %}
    <div class="form-group"><label>Thumbnail Image</label>{{ form.image }}</div>
    <div class="form-group"><label>Title</label>{{ form.title }}</div>
    <div class="form-group"><label>Short Description</label>{{ form.description }}</div>
    <div class="form-group"><label>Publish Date</label>{{ form.date }}</div>
    <button type="submit" class="submit-btn">{% if edit_mode %} Update Post {% else %} Publish Post {% endif %}</button>
</form>

<hr>

<h2 class="section-title">All Blog Posts</h2>
<div class="blog-grid">
    {% for post in posts %}
    <div class="blog-item">
        <img src="{{ post.image.url }}">
        <div class="blog-info">
            <span>{{ post.date }}</span>
            <h3>{{ post.title }}</h3>
        </div>
        <div class="blog-actions">
            <a href="{% url 'edit_blog' post.pk %}" class="edit-btn">Edit</a>
            <a href="{% url 'delete_blog' post.pk %}" class="delete-btn" onclick="return confirm('Delete post?')">Delete</a>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}